---
'title': 'Java 中的泛型与 C++ 中的模板'
'date': 2017-09-15
---
# Java 中的泛型与 C++ 中的模板

今天简单理解了一下 Java 中的泛型与 C++ 中的模板。

在之前已经使用 Java 和 C++ 实现了「通用型」的 Link ADT，而实现 ADT 需要的关键功能就是二者提供的泛型和模版，从而可以避免为每一类数据类型单独实现一个 ADT 的笨拙做法。

这种「泛型」能力，在各种语言中基本都有体现，在我最开始学习的 Python 中，这种能力完全被「动态类型」隐藏，导致我迟迟未能认识到「泛型」能力的重要性。

换句话说，动态语言就是实现了一个非常灵活的「通用数据类型」，往往会有一个「元类型」，其余所有类型都是「元类型」的子类型，因此可以在运行期间判断「数据对象」所属的类型。

在 Python 中，一切皆对象，这体现为所有对象都出自 type。type 是元类对象，元类对象可以生成类对象，而类对象是实例对象的模板。在 Python 中，主要针对类对象和函数对象编程，函数对象要么独立，要么从属为类对象的方法属性。而类之间的关系主要是继承与被继承，包含与被包含，组成与被组成。

在 JS 中，同样是一切皆对象，这体现为所有对象都源于 Object.prototype，并有一个构造函数对象、构造函数对象的原型对象以及构造函数的实例对象的三角关系，构造函数的实例有一个原型，其原型就是构造函数对象的原型对象，实例与原型之间形成了一条原型链。值得注意的是，在 JS 中编程，主要针对实例对象进行编程，而实例对象之间会形成一条原型链条，这条链由原型对象串联。

说了这么多，就是想表达一个意思：**动态语言中有一个终极通用类型，从而可以动态遍历。**我目前是这么理解的。

在静态类型语言中，没有一个终极通用类型，至少原始类型之间是并列的存在。

既然在实际的编程需求中，动态性是一个强需求，那为什么静态语言对此没有一个非常直接的支持呢？**性能，性能，还是性能。**性能决定效率，效率决定用户的使用体验，使用体验在一个很基础的层面上影响用户去留，而**用户是天，是钱。**

**为了争取更多人的支持，从而赚取更多钱，人类向来是不吝啬于压榨自身的。压榨久了，就习惯了，而且新生代必须选择进场，而且是越早越好。**

扯得有点远了，对我这个技术弱鸡来说，现在还不应该担心这些。我现在应该积极进场，努力比别人压榨自己更多一点。

所以，站在性能这一点上考虑，就很能说明问题。

>  C++ 和 Java 都是在语言诞生并初步成熟之后才慢慢加入「泛型」的支持，也是说，这种「泛型」肯定是一种比较明显的底层实现，使用这两种语言的程序员能比较直接的感知到「泛型」的存在，我们在使用「泛型」时，总是主动的，有一定目的的。再换句话说，「泛型」在这个两门语言里，只是一个特性，就像一个产品提供了一个功能一样，特性和功能本身就说明它们并不是无处不在。

**但在动态语言中，泛型时无处不在的，以至于程序员都无法直接感知到。也对，一个无处不在的东西，就像空气，多数时候反而并没有存在感。**

这种无处不在其实是很耗费性能的，有没有更优雅的解决方案呢？

**有，那就是 Go 中的 interface 。**