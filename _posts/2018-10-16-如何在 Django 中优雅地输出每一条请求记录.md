---
'title': '如何在 Django 中优雅地输出每一条请求记录'
'date': 2018-10-16
---
# 如何在 Django 中优雅地输出每一条请求记录

今天，学了一下中间件，很好用，写一个类，写好特定的初始化和调用方法，即可统一对进来的每一个请求进行日志输出记录。

记录点包括：

- 请求起始与终止时间
- 请求方法名称
- 请求的完整 URI（包括 schema 和查询参数）与 body（可能为空）
- 请求结束时，输出谁用什么方法请求了哪个 URI

通过这样一个简单的中间件，优雅地解决了自己的需求，同时也废弃掉了自己之前写在 request\_started 信号中简易且不够完善的日志输出